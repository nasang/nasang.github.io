<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> CS 61B (Sp21) Notes 1, Introduction to Java | Na Sang </title> <meta name="author" content="Na Sang"> <meta name="description" content="Java basics, List, Class "> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Trirong"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?b8ef20a79f5306f65378fcc706e98671" media="" id="highlight_theme_light"> <link defer href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://nasang.github.io/blog/course/2024/CS61B-Notes-1-Introduction-to-Java/"> </head> <body class=" "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm sticky-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Na</span> Sang </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog </a> </li> </ul> </div> </div> </nav> </header> <div class="container mt-5" role="main"> <div class="row"> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">CS 61B (Sp21) Notes 1, Introduction to Java</h1> <p class="post-meta"> Created in October 19, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/data-structures"> <i class="fa-solid fa-hashtag fa-sm"></i> data structures</a>   <a href="/blog/tag/java"> <i class="fa-solid fa-hashtag fa-sm"></i> java</a>   ·   <a href="/blog/category/course"> <i class="fa-solid fa-tag fa-sm"></i> course</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <h2 id="1-intro-hello-world-java">1. Intro, Hello World Java</h2> <h3 id="11-java-and-object-orientation">1.1 Java and Object Orientation</h3> <p>Java is an <strong>object oriented language</strong> with strict requirements:</p> <ul> <li>Every Java file must contain a <strong>class</strong> declaration*.</li> <li> <strong>All code</strong> lives inside a class*, even helper functions, global constants, etc.</li> <li>To run a Java program, you typically define a <strong>main method</strong> using <code class="language-plaintext highlighter-rouge">public static void main(String[] args)</code> </li> </ul> <p>*: This is not completely true, e.g. we can also declare “<strong>interfaces</strong>” in <code class="language-plaintext highlighter-rouge">.java</code> files that may contain code.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWorld</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Hello world!"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="12-java-and-static-typing">1.2 Java and Static Typing</h3> <p>Java is <strong>statically typed</strong>.</p> <ul> <li>All variables, parameters, and methods must have a <strong>declared type</strong>.</li> <li>That type can <strong>never change</strong>.</li> <li>Expressions also have a type, e.g. <code class="language-plaintext highlighter-rouge">larger(5, 10) + 3</code> has type int.</li> <li>The compiler checks that all the types in your program are compatible <strong>before</strong> the program ever runs.</li> </ul> <h3 id="13-compilation">1.3 Compilation</h3> <p><img src="/assets/img/cs61b/1/compilation.png" alt="compilation" width="600" loading="lazy"></p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>javac HelloWorld.java
<span class="nv">$ </span>java HelloWorld
Hello World! 
</code></pre></div></div> <p>Why make a class file at all?</p> <ul> <li> <code class="language-plaintext highlighter-rouge">.class</code> file has been type checked. Distributed code is <strong>safer</strong>.</li> <li> <code class="language-plaintext highlighter-rouge">.class</code> files are ‘simpler’ for machine to execute. Distributed code is <strong>faster</strong>.</li> </ul> <h2 id="2-defining-and-using-classes">2. Defining and Using Classes</h2> <h3 id="21-classes">2.1 Classes</h3> <ul> <li>Classes can contain not just functions (a.k.a. <strong>methods</strong>), but also data (a.k.a. <strong>variables</strong>).</li> <li>Classes can be instantiated as <strong>objects</strong>.</li> </ul> <p>Static vs. Non-Static Members</p> <ul> <li>A variable or method defined in a class is also called a <strong>member</strong> of that class.</li> <li>A class may have a mix of <strong>static</strong> and <strong>non-static</strong> members. <ul> <li>Static members are accessed using class name.</li> <li>Non-static members cannot be invoked using class name.</li> <li>Static methods must access instance variables via a specific instance.</li> </ul> </li> </ul> <h2 id="3-testing">3. Testing</h2> <p>[placeholder]</p> <h2 id="4-references-recursion-and-lists">4. References, Recursion, and Lists</h2> <h3 id="41-primitive-types">4.1 Primitive Types</h3> <h4 id="411-bits">4.1.1 Bits</h4> <p>Information is stored in memory as a sequence of ones and zeros. Each Java type has a different way to interpret the bits:</p> <ul> <li>8 primitive types in Java: byte, short, int, long, float, double, boolean, char</li> </ul> <h4 id="412-declaring-a-variable-simplified">4.1.2 Declaring a Variable (Simplified)</h4> <p>When you declare a variable of a certain type in Java:</p> <ul> <li>Your computer sets aside exactly enough bits to hold a thing of that type.</li> <li>Java creates an internal table that maps each <strong>variable name</strong> to a <strong>location</strong>.</li> </ul> <p><img src="/assets/img/cs61b/4/declaring.png" alt="declaring" width="500" loading="lazy"></p> <h4 id="413-the-golden-rule-of-equals-groe">4.1.3 The Golden Rule of Equals (GRoE)</h4> <p>Given variables <code class="language-plaintext highlighter-rouge">y</code> and <code class="language-plaintext highlighter-rouge">x</code>, <code class="language-plaintext highlighter-rouge">y = x</code> copies all the bits from <code class="language-plaintext highlighter-rouge">x</code> into <code class="language-plaintext highlighter-rouge">y</code>.</p> <h3 id="42-reference-types">4.2 Reference Types</h3> <p>Everything else, including arrays, is a reference type.</p> <h4 id="421-class-instantiations">4.2.1 Class Instantiations</h4> <p>When we instantiate an Object:</p> <ul> <li>Java first allocates a box of bits for each instance variable of the class and fills them with a default value (e.g. 0, null).</li> <li>The constructor then usually fills every such box with some other value.</li> </ul> <p><img src="/assets/img/cs61b/4/class_instantiations.png" alt="class instantiations" width="600" loading="lazy"></p> <p>Can think of <code class="language-plaintext highlighter-rouge">new</code> as returning the <strong>address</strong> of the newly created object.</p> <ul> <li>Addresses in Java are 64 bits.</li> <li>Example: If object is created in memory location <code class="language-plaintext highlighter-rouge">2384723423</code>, then new returns <code class="language-plaintext highlighter-rouge">2384723423</code>.</li> </ul> <p><img src="/assets/img/cs61b/4/new.png" alt="new" width="600" loading="lazy"></p> <h4 id="422-reference-type-variable-declarations">4.2.2 Reference Type Variable Declarations</h4> <p>When we declare a variable of any reference type:</p> <ul> <li>Java allocates exactly a box of size 64 bits, no matter what type of object.</li> <li>These bits can be either set to: <ul> <li>Null (all zeros).</li> <li>The 64 bit address of a specific instance of that class (returned by <code class="language-plaintext highlighter-rouge">new</code>).</li> </ul> </li> </ul> <p><img src="/assets/img/cs61b/4/reference_type_declaration.png" alt="reference type declaration" width="300" loading="lazy"></p> <p>Reference types obey the Golden Rule of Equals: Just as with primitive types, the equals sign <strong>copies the bits</strong>.</p> <p><img src="/assets/img/cs61b/4/groe.png" alt="GRoE" width="300" loading="lazy"></p> <h3 id="43-parameter-passing">4.3 Parameter Passing</h3> <p>Passing parameters obeys the same rule: Simply <strong>copy the bits</strong> to the new scope.</p> <h3 id="44-instantiation-of-arrays">4.4 Instantiation of Arrays</h3> <p>Arrays are also Objects.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span><span class="o">[]</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">95</span><span class="o">,</span> <span class="mi">4</span><span class="o">};</span>
</code></pre></div></div> <ul> <li>Creates a 64 bit box for storing an int array address. (declaration)</li> <li>Creates a new Object, in this case an int array. (instantiation)</li> <li>Puts the address of this new Object into the 64 bit box named <code class="language-plaintext highlighter-rouge">a</code>. (assignment)</li> </ul> <p><img src="/assets/img/cs61b/4/array.png" alt="array" width="400" loading="lazy"></p> <h2 id="5-sllists-nested-classes-sentinel-nodes">5. SLLists, Nested Classes, Sentinel Nodes</h2> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SLList</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">IntNode</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">item</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nc">IntNode</span> <span class="n">next</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">IntNode</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">,</span> <span class="nc">IntNode</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">item</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
      <span class="n">next</span> <span class="o">=</span> <span class="n">n</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="nc">IntNode</span> <span class="n">sentinel</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">size</span><span class="o">;</span>
  
  <span class="kd">public</span> <span class="nf">SLList</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">sentinel</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">IntNode</span><span class="o">(-</span><span class="mi">1</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addFirst</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">sentinel</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">IntNode</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">sentinel</span><span class="o">.</span><span class="na">next</span><span class="o">);</span>
    <span class="n">size</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>
  <span class="o">}</span>
  
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getFirst</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">sentinel</span><span class="o">.</span><span class="na">next</span><span class="o">.</span><span class="na">item</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addLast</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">IntNode</span> <span class="n">p</span> <span class="o">=</span> <span class="n">sentinel</span><span class="o">;</span>
    <span class="k">while</span> <span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">next</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">next</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="n">p</span><span class="o">.</span><span class="na">next</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">IntNode</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="n">size</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">size</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">size</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><img src="/assets/img/cs61b/5/sllist.png" alt="SLList" width="500" loading="lazy"></p> <h2 id="6-dllists-arrays">6. DLLists, Arrays</h2> <h3 id="61-doubly-linked-lists">6.1 Doubly Linked Lists</h3> <p>One downside of SLLists is that <strong>inserting at the back</strong> of an SLList is much slower than the front. We can have a <code class="language-plaintext highlighter-rouge">last</code> pointer to make <code class="language-plaintext highlighter-rouge">add</code> and <code class="language-plaintext highlighter-rouge">get</code> operations at the back fast. However, this is insufficient to support fast <code class="language-plaintext highlighter-rouge">remove</code>. We may want to add backwards links from every node.</p> <blockquote> <p>Reverse pointers allow all operations (<code class="language-plaintext highlighter-rouge">add</code>, <code class="language-plaintext highlighter-rouge">get</code>, <code class="language-plaintext highlighter-rouge">remove</code>) to be fast.</p> </blockquote> <p><img src="/assets/img/cs61b/6/naive_dllist.png" alt="Naive DLList" width="500" loading="lazy"></p> <p>This approach has an annoying special case: <code class="language-plaintext highlighter-rouge">last</code> sometimes points at the sentinel, and sometimes points at a ‘real’ node.</p> <ul> <li>Solution 1: have two sentinels</li> <li>Solution 2: circular sentinel</li> </ul> <p><img src="/assets/img/cs61b/6/circular_sentinel.png" alt="Circular Sentinel" width="500" loading="lazy"></p> <h3 id="62-arrays">6.2 Arrays</h3> <p>Arrays consist of:</p> <ul> <li>A <strong>fixed</strong> integer length (cannot change!)</li> <li>A sequence of <code class="language-plaintext highlighter-rouge">N</code> memory boxes where <code class="language-plaintext highlighter-rouge">N=length</code>, such that: <ul> <li>All of the boxes hold the <strong>same type</strong> of value (and have same # of bits).</li> <li>The boxes are numbered <code class="language-plaintext highlighter-rouge">0</code> through <code class="language-plaintext highlighter-rouge">length-1</code>.</li> </ul> </li> </ul> <p>A <strong>2D Array</strong> is an array of array addresses. <img src="/assets/img/cs61b/6/2d_array.png" alt="2D Array" width="600" loading="lazy"></p> <h2 id="7-alists-resizing">7. ALists, Resizing</h2> <h3 id="71-naive-array-lists">7.1 Naive Array Lists</h3> <p>Retrieval from any position of an array is very fast. How to build an array version of a list?</p> <p>AList <strong>Invariants</strong>:</p> <ul> <li>The position of the next item to be inserted is always <code class="language-plaintext highlighter-rouge">size</code>.</li> <li> <code class="language-plaintext highlighter-rouge">size</code> is always the number of items in the AList.</li> <li>The last item in the list is always in position <code class="language-plaintext highlighter-rouge">size - 1</code>.</li> </ul> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AList</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">items</span><span class="o">;</span>    
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">size</span><span class="o">;</span>
 
  <span class="kd">public</span> <span class="nf">AList</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">items</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="mi">100</span><span class="o">];</span>  <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
  <span class="o">}</span>
 
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addLast</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">items</span><span class="o">[</span><span class="n">size</span><span class="o">]</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
    <span class="n">size</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>
  <span class="o">}</span>
 
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getLast</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">items</span><span class="o">[</span><span class="n">size</span> <span class="o">-</span> <span class="mi">1</span><span class="o">];</span>
  <span class="o">}</span>
 
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">items</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">size</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">size</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="72-resizing-arrays">7.2 Resizing Arrays</h3> <p>When the array gets too full (i.e., <code class="language-plaintext highlighter-rouge">size==items.length</code>), just make a new array: <img src="/assets/img/cs61b/7/resizing.png" alt="Resizing" width="500" loading="lazy"></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">addLast</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">size</span> <span class="o">==</span> <span class="n">items</span><span class="o">.</span><span class="na">length</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// resize(size + 1); // Unusably bad.</span>
    <span class="n">resize</span><span class="o">(</span><span class="n">size</span> <span class="o">*</span> <span class="no">RFACTOR</span><span class="o">);</span> <span class="c1">// Great performance. </span>
    <span class="c1">// This is how the Python list is implemented.</span>
  <span class="o">}</span>
  <span class="n">items</span><span class="o">[</span><span class="n">size</span><span class="o">]</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
  <span class="n">size</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="kt">void</span> <span class="nf">resize</span><span class="o">(</span><span class="kt">int</span> <span class="n">capacity</span><span class="o">)</span> <span class="o">{</span>
  <span class="kt">int</span><span class="o">[]</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">capacity</span><span class="o">];</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">arraycopy</span><span class="o">(</span><span class="n">items</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">a</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">size</span><span class="o">);</span>
  <span class="n">items</span> <span class="o">=</span> <span class="n">a</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div> <p>An AList should not only be efficient in time, but also efficient in space.</p> <ul> <li>Define the “usage ratio” <code class="language-plaintext highlighter-rouge">R = size / items.length</code>;</li> <li>Half array size when <code class="language-plaintext highlighter-rouge">R &lt; 0.25</code>.</li> </ul> <h2 id="8-inheritance-implements">8. Inheritance, Implements</h2> <h3 id="81-interface-inheritance">8.1 Interface Inheritance</h3> <p>Our <code class="language-plaintext highlighter-rouge">AList</code> and <code class="language-plaintext highlighter-rouge">SLList</code> classes have the following methods (exact same method signatures for both classes). <code class="language-plaintext highlighter-rouge">SLLists</code> and <code class="language-plaintext highlighter-rouge">ALists</code> are both clearly some kind of “list”. <code class="language-plaintext highlighter-rouge">List</code> is a <strong>hypernym</strong> of <code class="language-plaintext highlighter-rouge">SLList</code> and <code class="language-plaintext highlighter-rouge">AList</code>.</p> <p><img src="/assets/img/cs61b/8/list_methods.png" alt="list_methods" width="500" loading="lazy"></p> <h4 id="811-interface-and-implements-keywords">8.1.1 Interface and Implements Keywords</h4> <p>Use the new keyword <code class="language-plaintext highlighter-rouge">interface</code> instead of <code class="language-plaintext highlighter-rouge">class</code> to define a <code class="language-plaintext highlighter-rouge">List61B</code>. Interface is a specification of <strong>what</strong> a List is able to do, not how to do it.</p> <p><img src="/assets/img/cs61b/8/list_interface.png" alt="list_interface" width="500" loading="lazy"></p> <p>Use the <code class="language-plaintext highlighter-rouge">implements</code> keyword to tell the Java compiler that SLList and AList are <strong>hyponyms</strong> of List61B.</p> <p><img src="/assets/img/cs61b/8/implements.png" alt="Implements" width="450" loading="lazy"></p> <h4 id="812-overriding-vs-overloading">8.1.2 Overriding vs. Overloading</h4> <p><strong>Method signature</strong> is the <u>method name</u> and the <u>number and type of its parameters</u>.</p> <ul> <li> <strong>overriding</strong>: If a “subclass” has a method with the <strong>exact same signature</strong> as in the “superclass”, we say the subclass overrides the method.</li> <li> <strong>overloading</strong>: Methods with the <strong>same name but different signatures</strong> are overloaded.</li> </ul> <p><img src="/assets/img/cs61b/8/over.png" alt="Overriding Overloading" width="500" loading="lazy"></p> <p>We mark overriding methods with the <code class="language-plaintext highlighter-rouge">@Override</code> annotation.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AList</span><span class="o">&lt;</span><span class="nc">Item</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="nc">List61B</span><span class="o">&lt;</span><span class="nc">Item</span><span class="o">&gt;</span> <span class="o">{</span>
   <span class="o">...</span>

   <span class="nd">@Override</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addLast</span><span class="o">(</span><span class="nc">Item</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span> 
      <span class="o">...</span> 
</code></pre></div></div> <p>Why use <code class="language-plaintext highlighter-rouge">@Override</code>?</p> <ul> <li>Protects against typos. The code won’t compile if it is not actually an overriding method.</li> <li>Reminds programmer that method definition came from somewhere higher up in the inheritance hierarchy.</li> </ul> <p>Even if you don’t write <code class="language-plaintext highlighter-rouge">@Override</code>, subclass <strong>still overrides</strong> the method.</p> <h4 id="813-interface-inheritance">8.1.3 Interface Inheritance</h4> <p>Specifying the capabilities of a subclass using the <code class="language-plaintext highlighter-rouge">implements</code> keyword is known as <strong>interface inheritance</strong>. Subclasses <strong>must</strong> override all of these methods. Will fail to compile otherwise. Interface inheritance is a powerful tool for <strong>generalizing</strong> code.</p> <p>If <code class="language-plaintext highlighter-rouge">X</code> is a superclass of <code class="language-plaintext highlighter-rouge">Y</code>, then memory boxes for <code class="language-plaintext highlighter-rouge">X</code> may contain <code class="language-plaintext highlighter-rouge">Y</code>. An <code class="language-plaintext highlighter-rouge">AList</code> is-a <code class="language-plaintext highlighter-rouge">List</code>. Therefore <code class="language-plaintext highlighter-rouge">List</code> variables can hold <code class="language-plaintext highlighter-rouge">ALList</code> addresses.</p> <p><img src="/assets/img/cs61b/8/copy.png" alt="Copy" width="500" loading="lazy"></p> <h3 id="82-implementation-inheritance-default-methods">8.2 Implementation Inheritance: Default Methods</h3> <ul> <li> <strong>Interface inheritance</strong>: Subclass inherits signatures, but NOT implementation.</li> <li> <strong>Implementation inheritance</strong>: Subclasses can inherit signatures AND implementation. <ul> <li>Use the <code class="language-plaintext highlighter-rouge">default</code> keyword to specify a method that subclasses should inherit from an interface. <div class="language-java highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">List61B</span><span class="o">&lt;</span><span class="nc">Item</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="k">default</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">print</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="o">();</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="n">i</span><span class="o">)</span> <span class="o">+</span> <span class="s">" "</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div> </div> </li> <li>If you don’t like a default method, you can <strong>override</strong> it. <div class="language-java highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">SLList</span><span class="o">&lt;</span><span class="nc">Item</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">print</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Node</span> <span class="n">p</span> <span class="o">=</span> <span class="n">sentinel</span><span class="o">.</span><span class="na">next</span><span class="o">;</span> <span class="n">p</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">;</span> <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">next</span><span class="o">)</span> <span class="o">{</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">item</span> <span class="o">+</span> <span class="s">" "</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div> </div> </li> </ul> </li> </ul> <h3 id="83-static-and-dynamic-type">8.3 Static and Dynamic Type</h3> <ul> <li>Compile-time type (static type): the type specified at <strong>declaration</strong>. Never changes.</li> <li>Run-time type (dynamic type): the type specified at <strong>instantiation</strong> (e.g. when using <code class="language-plaintext highlighter-rouge">new</code>).</li> </ul> <p><img src="/assets/img/cs61b/8/types.png" alt="Types" width="520" loading="lazy"></p> <p>Suppose we call a method of an object using a variable with compile-time type <code class="language-plaintext highlighter-rouge">X</code> and run-time type <code class="language-plaintext highlighter-rouge">Y</code>. Then if <code class="language-plaintext highlighter-rouge">Y</code> <strong>overrides</strong> the method, <code class="language-plaintext highlighter-rouge">Y</code>’s method is used instead.</p> <h2 id="9-extends-casting-higher-order-functions">9. Extends, Casting, Higher Order Functions</h2> <h3 id="91-the-extends-keyword">9.1 The Extends Keyword</h3> <p>If you want one class to be a hyponym of another <strong>class</strong> (instead of an interface), you use <code class="language-plaintext highlighter-rouge">extends</code>.</p> <h4 id="911-rotatingsllist">9.1.1 RotatingSLList</h4> <p>We’d like to build <code class="language-plaintext highlighter-rouge">RotatingSLList</code> that can perform any <code class="language-plaintext highlighter-rouge">SLList</code> operation as well as <code class="language-plaintext highlighter-rouge">rotateRight()</code>: Moves back item the front.</p> <p><img src="/assets/img/cs61b/9/rotatinglist.png" alt="rotatinglist" width="520" loading="lazy"></p> <p>Because of <code class="language-plaintext highlighter-rouge">extends</code>, <code class="language-plaintext highlighter-rouge">RotatingSLList</code> inherits all members of <code class="language-plaintext highlighter-rouge">SLList</code>:</p> <ul> <li>All instance and static variables.</li> <li>All methods.</li> <li>All nested classes. Constructors are not inherited.</li> </ul> <h4 id="912-vengefulsllist">9.1.2 VengefulSLList</h4> <p>We want to build an SLList that:</p> <ul> <li>Remembers all Items that have been destroyed by <code class="language-plaintext highlighter-rouge">removeLast</code>.</li> <li>Has an additional method <code class="language-plaintext highlighter-rouge">printLostItems()</code>, which prints all deleted items.</li> </ul> <p><img src="/assets/img/cs61b/9/vengefulsllist.png" alt="vengefulsllist" width="520" loading="lazy"></p> <h4 id="913-constructor-behavior">9.1.3 Constructor Behavior</h4> <p><strong>Constructors</strong> are not inherited. However, the rules of Java say that all constructors must start with a call to one of the super class’s constructors.</p> <ul> <li>You can explicitly call the constructor with the keyword <code class="language-plaintext highlighter-rouge">super</code>.</li> <li>If you don’t explicitly call the constructor, Java will automatically do it for you.</li> <li>If you want to use a super constructor other than the no-argument constructor, can give parameters to super.</li> </ul> <p><img src="/assets/img/cs61b/9/super_1.png" alt="super_1" width="520" loading="lazy"></p> <p><img src="/assets/img/cs61b/9/super_2.png" alt="super_2" width="520" loading="lazy"></p> <h3 id="92-encapsulation">9.2 Encapsulation</h3> <p><strong>Module</strong>: A set of methods that work together as a whole to perform some task or set of related tasks. A module is said to be <strong>encapsulated</strong> if its implementation is completely hidden, and it can be accessed only through a documented interface.</p> <p>Implementation inheritance (e.g. extends) breaks encapsulation.</p> <p><img src="/assets/img/cs61b/9/bark.png" alt="bark" width="520" loading="lazy"></p> <h3 id="93-type-checking-and-casting">9.3 Type Checking and Casting</h3> <h4 id="931-compile-time-type-checking">9.3.1 Compile-Time Type Checking</h4> <ul> <li>Compiler allows <strong>method calls</strong> based on compile-time type of variable. <ul> <li> <code class="language-plaintext highlighter-rouge">sl</code>’s runtime type: <code class="language-plaintext highlighter-rouge">VengefulSLList</code>. But cannot call <code class="language-plaintext highlighter-rouge">printLostItems</code>.</li> </ul> </li> <li>Compiler also allows <strong>assignments</strong> based on compile-time types. <ul> <li>Even though <code class="language-plaintext highlighter-rouge">sl</code>’s runtime-type is <code class="language-plaintext highlighter-rouge">VengefulSLList</code>, cannot assign to <code class="language-plaintext highlighter-rouge">vsl2</code>.</li> </ul> </li> </ul> <p><img src="/assets/img/cs61b/9/type_checking.png" alt="type_checking" width="550" loading="lazy"></p> <h4 id="932-compile-time-types-and-expressions">9.3.2 Compile-Time Types and Expressions</h4> <p>Expressions have compile-time types:</p> <ul> <li>An expression using the <code class="language-plaintext highlighter-rouge">new</code> keyword has the specified compile-time type.</li> </ul> <p><img src="/assets/img/cs61b/9/expression_1.png" alt="expression_1" width="500" loading="lazy"></p> <ul> <li>Method calls have compile-time type equal to their declared type.</li> </ul> <p><img src="/assets/img/cs61b/9/expression_2.png" alt="expression_2" width="520" loading="lazy"></p> <h4 id="933-casting">9.3.3 Casting</h4> <p>Java has a special syntax for specifying the compile-time type of any expression: Put <strong>desired type in parenthesis</strong> before the expression.</p> <ul> <li>Compile-time type Dog: <code class="language-plaintext highlighter-rouge">maxDog(frank, frankJr);</code> </li> <li>Compile-time type Poodle: <code class="language-plaintext highlighter-rouge">(Poodle) maxDog(frank, frankJr);</code> </li> </ul> <p><img src="/assets/img/cs61b/9/casting_1.png" alt="casting_1" width="520" loading="lazy"></p> <p>Casting is a powerful but dangerous tool. Tells Java to treat an expression as having a different compile-time type.</p> <p><img src="/assets/img/cs61b/9/casting_2.png" alt="casting_2" width="520" loading="lazy"> <em>If we run the code above, we get a ClassCastException at runtime.</em></p> <h3 id="94-higher-order-functions">9.4 Higher Order Functions</h3> <p><strong>Higher Order Function</strong>: A function that treats another function as data. e.g. takes a function as input.</p> <h4 id="941-old-school-java-7-and-earlier">9.4.1 Old School (Java 7 and earlier)</h4> <p>Fundamental issue: Memory boxes (variables) cannot contain pointers to functions. Can use an interface instead. Note: The old way is still widely used, e.g. Comparators.</p> <p><img src="/assets/img/cs61b/9/hof_1.png" alt="hof_1" width="630" loading="lazy"></p> <h4 id="942-java-8-or-later">9.4.2 Java 8 or Later</h4> <p>In Java 8, new types were introduced: now can can hold references to methods.</p> <p><img src="/assets/img/cs61b/9/hof_2.png" alt="hof_2" width="630" loading="lazy"></p> <h2 id="10-subtype-polymorphism-vs-hofs">10. Subtype Polymorphism vs. HoFs</h2> <h3 id="101-subtype-polymorphism-多态">10.1 Subtype Polymorphism (多态)</h3> <p>The biggest idea of the last couple of lectures: Subtype Polymorphism. Polymorphism: “providing a single interface to entities of different types”.</p> <p><img src="/assets/img/cs61b/10/compare.png" alt="compare" width="500" loading="lazy"></p> <h3 id="102-comparable">10.2 Comparable</h3> <p>The built-in <code class="language-plaintext highlighter-rouge">Comparable</code> interface is already defined and used by tons of libraries.</p> <p><img src="/assets/img/cs61b/10/comparable.png" alt="comparable" width="300" loading="lazy"></p> <p><img src="/assets/img/cs61b/10/dog_comparable.png" alt="dog_comparable" width="500" loading="lazy"></p> <h3 id="103-comparators">10.3 Comparators</h3> <p>Suppose we want to write a program that prints a string representation of the larger of two objects according to some specific comparison function.</p> <p><img src="/assets/img/cs61b/10/comparator_1.png" alt="comparator_1" width="500" loading="lazy"></p> <p><img src="/assets/img/cs61b/10/dog_comparator.png" alt="dog_comparator" width="500" loading="lazy"></p> <h2 id="11-exceptions-iterators-object-methods">11. Exceptions, Iterators, Object Methods</h2> <h3 id="111-exceptions">11.1 Exceptions</h3> <p>When something goes really wrong, break the normal flow of control.</p> <p><img src="/assets/img/cs61b/11/exception.png" alt="exception" width="500" loading="lazy"></p> <h3 id="112-iteration">11.2 Iteration</h3> <p>Java allows us to iterate through Lists and Sets using a convenient shorthand syntax sometimes called the “foreach” or “enhanced for” loop.</p> <p><img src="/assets/img/cs61b/11/foreach.png" alt="foreach" width="400" loading="lazy"></p> <p>How Iteration Really Works?</p> <p><img src="/assets/img/cs61b/11/iteration_1.png" alt="iteration_1" width="500" loading="lazy"></p> <p>To support ugly iteration:</p> <ul> <li>Add an <code class="language-plaintext highlighter-rouge">iterator()</code> method to <code class="language-plaintext highlighter-rouge">ArraySet</code> that returns an <code class="language-plaintext highlighter-rouge">Iterator&lt;T&gt;</code>.</li> <li> <code class="language-plaintext highlighter-rouge">The Iterator&lt;T&gt;</code> that we return should have a useful <code class="language-plaintext highlighter-rouge">hasNext()</code> and <code class="language-plaintext highlighter-rouge">next()</code> method.</li> </ul> <p><img src="/assets/img/cs61b/11/iteration_2.png" alt="iteration_2" width="500" loading="lazy"></p> <p>To support the enhanced for loop, we need to make <code class="language-plaintext highlighter-rouge">ArraySet</code> implement the <code class="language-plaintext highlighter-rouge">Iterable</code> interface.</p> <p><img src="/assets/img/cs61b/11/iteration_3.png" alt="iteration_3" width="500" loading="lazy"></p> <h3 id="113-object-methods">11.3 Object Methods</h3> <h4 id="1131-tostring">11.3.1 toString()</h4> <p>The <code class="language-plaintext highlighter-rouge">toString()</code> method provides a string representation of an object. The <a href="https://github.com/AdoptOpenJDK/openjdk-jdk11/blob/999dbd4192d0f819cb5224f26e9e7fa75ca6f289/src/java.base/share/classes/java/lang/Object.java#L245" rel="external nofollow noopener" target="_blank">implementation of <code class="language-plaintext highlighter-rouge">toString()</code> in Object</a> is the the name of the class, then an @ sign, then the memory location of the object.</p> <p><img src="/assets/img/cs61b/11/to_string_1.png" alt="to_string_1" width="530" loading="lazy"></p> <p>One approach to implement <code class="language-plaintext highlighter-rouge">toString</code> for <code class="language-plaintext highlighter-rouge">ArraySet</code>. This code is slow Adding even a single character to a string creates an entirely new string. It’s because Strings are “immutable”.</p> <p><img src="/assets/img/cs61b/11/to_string_2.png" alt="to_string_2" width="530" loading="lazy"></p> <p>Much faster approach is shown below. Append operation for a <code class="language-plaintext highlighter-rouge">StringBuilder</code> is fast.</p> <p><img src="/assets/img/cs61b/11/to_string_3.png" alt="to_string_3" width="530" loading="lazy"></p> <h4 id="1132-equals">11.3.2 Equals</h4> <p><code class="language-plaintext highlighter-rouge">==</code> compares the bits. For references, <code class="language-plaintext highlighter-rouge">==</code> means “referencing the same object.” <a href="https://github.com/AdoptOpenJDK/openjdk-jdk11/blob/999dbd4192d0f819cb5224f26e9e7fa75ca6f289/src/java.base/share/classes/java/lang/Object.java#L157" rel="external nofollow noopener" target="_blank">Default implementation</a> of <code class="language-plaintext highlighter-rouge">.equals</code> uses <code class="language-plaintext highlighter-rouge">==</code>.</p> <p>Implement <code class="language-plaintext highlighter-rouge">equals</code> for <code class="language-plaintext highlighter-rouge">ArraySet</code>.</p> <p><img src="/assets/img/cs61b/11/equal.png" alt="equal" width="530" loading="lazy"></p> </div> </article> </div> </div> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> </div> </div> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]},svg:{fontCache:"global"}};</script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"> </script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> </body> </html>